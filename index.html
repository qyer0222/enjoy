<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body {
            color: #ffffff;
            font-family:Monospace;
            font-size:13px;
            text-align:center;
            font-weight: bold;
            background-color: #000;
            margin: 0px;
            overflow: hidden;
        }

        #info {
            position: absolute;
            top: 0px; width: 100%;
            padding: 5px;
        }

        a {
            color: #fff;
        }
    </style>
</head>
<body>
    <div id="container"></div>
    <div id="info">首页</div>
    <script src="three.js"></script>
    <script src="world.js">

    </script>
    <script>
        var camera,scene,renderer,mesh
        //相机 场景 渲染
        var container
        init();
        animata();
        //初始化函数
        function init() {
            container = document.getElementById('container');
            camera = new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,1,1000)
            //相机位置
            camera.position.z = 200;
            //场景
            scene = new THREE.Scene();
            renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth,window.innerHeight)
            container.appendChild(renderer.domElement)
            function latlngToXYZ(coord,radius) {
                var sphereArray = [];
                for(var i=0;i<coord.length;i++){
                    var lat = coord[i].lat;
                    var lng = coord[i].lng;
                    var radLat = (lat*Math.PI/180);//纬度
                    var radLng = (lng*Math.PI/180);//经度
                    var posZ = radius*Math.sin(radLat);
                    var subRadius = radius*Math.cos(radLat);
                    var posX = subRadius*Math.cos(radLng);
                    var posY = subRadius*Math.sin(radLng);
                    sphereArray.push({x:posX,y:posY,z:posZ});
                }
                return sphereArray;
            }
            var posxyz = latlngToXYZ(chinaData,100)
            console.log(posxyz)
            //粒子
            //geometry 不太适合使用
            var geometry = new THREE.Geometry()
            //点尽量维持在0-1之间
            var length = posxyz.length;
            for(var i=0;i<length;i++){
                var x = posxyz[i].x;
                var y = posxyz[i].y;
                var z = posxyz[i].z;
                var vertex = new THREE.Vector3(x,y,z)
                geometry.vertices.push(vertex);
                console.log(1)
            }
            var material = new THREE.PointsMaterial({size:6,color:0xaaccff})
            // 上面是几何体和材质，下面的是粒子
            var partcle = new THREE.Points(geometry,material)
            //将粒子加入到场景当中
            scene.add(partcle)
        }
        //渲染函数
        function render() {
            renderer.render(scene,camera);
        }
        //动画函数
        function animata() {
            requestAnimationFrame(animata)
            render()
            scene.rotation.x += 0.01;
            scene.rotation.y += 0.01;
        }
    </script>
</body>
</html>